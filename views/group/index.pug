extends ../layouts/main

block content
  .columns.is-mobile.is-multiline.is-vcentered
    .column.is-narrow
      h1.title.is-1 Csoportok
    .column.is-narrow
      a.button.is-link(href="/groups/new") Új csoport
  if paginationOpt.pageNum > 1
    include ./pagination

  .cards.groups
    each group in groups
      .card.group
        a.card-header(href=`/groups/${group.id}`).is-shadowless
          .card-header-title
            .title #{group.name}
              .subtitle Szint: #{group.room}
          .card-header-icon
            span.icon.is-medium(class=`has-text-${group.doNotDisturb ? 'danger': 'success'}`)
              i.fas.fa-lg(class=`fa-${group.doNotDisturb ? '': 'un'}lock`)
        .card-content
          .content !{group.description}
          if group.tags
            .has-text-right
              - const tags = group.tags.split(",")
              each tag in tags.slice(0, 4)
                span &nbsp;
                span.tag.is-info= tag
              if tags.length > 4
                span &nbsp;...
        footer.card-footer
          .card-footer-item(title=`${dateFns.format(group.startDate, dateFns.DATE_FORMAT)}`)
            span.icon
              i.fas.fa-play
            span #{dateFns.formatDistanceToNowStrict(group.startDate, { addSuffix: true, locale: dateFns.huLocale })}
          .card-footer-item(title="Időtartam")
            span.icon
              i.fas.fa-stopwatch
            span #{dateFns.formatDistanceStrict(group.startDate, group.endDate, { locale: dateFns.huLocale })}
    else
      p.mt-3 Nincsenek megjelenítendő csoportok

  if paginationOpt.pageNum > 1 && groups.length > 2
    include ./pagination
